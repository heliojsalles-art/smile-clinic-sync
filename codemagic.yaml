workflows:
  grabber-android-build:
    name: Grabber Android Build
    instance_type: mac_mini_m2 # Use a macOS instance type

    scripts:
      - name: Set up environment and build with Grabber
        script: |
          # The Android SDK is pre-installed and available via default variables.
          # The main variable is ANDROID_HOME.
          echo "ANDROID_HOME is set to: $ANDROID_HOME"
          
          # Assuming 'grabber' command is in the system's PATH. 
          # You will need to adjust the actual command based on how your 
          # Grabber project builds an Android APK. 
          # This is a placeholder command.
          alias grabber='/users\builder\programs\gradle-8.14.1\bin'
          grabber build android sa.apk
          
          # You may need to copy the generated APK to a standard artifacts directory
          # for Codemagic to find it easily. Check your specific Grabber output path.
          # Example:
          cp /path/to/your/app-release.apk $CM_ARTIFACT_DIR/app-release.apk

    artifacts:
      # Specifies the path where the resulting APK artifacts are located.
      - app/build/outputs/sa.apk # Adjust path based on your project structure

   
    publishing:
      # Optional: Configure email publishing
      email:
        recipients:
          - heliojsalles@gmail.com
